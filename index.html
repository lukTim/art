<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Art Shop</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cormorant Garamond', serif;
      background-color: #f8f9f6;
    }
    #mobileMenuButton:focus {
      outline: none;
      box-shadow: none;
    }
    .fade-toggle {
      transition: max-height 0.3s ease, opacity 0.3s ease;
      overflow: hidden;
    }
    .fade-toggle.hidden {
      max-height: 0;
      opacity: 0;
    }
    .fade-toggle.visible {
      max-height: 500px;
      opacity: 1;
    }
  </style>
</head>

<body class="text-gray-700 min-h-screen">

  <!-- Navbar -->
  <header class="bg-white shadow-md sticky top-0 z-50 border-b border-gray-200">
    <nav class="container mx-auto px-4 py-4 flex justify-between items-center">
      <a href="#" onclick="loadPage('gallery.html', 'Gallery'); return false;" class="text-2xl font-bold text-gray-800">YourName.Art</a>

      <!-- Desktop Menu -->
      <ul class="hidden md:flex gap-6 font-medium">
        <a href="#" onclick="loadPage('gallery.html'); return false;" class="hover:text-teal-600 transition-colors duration-200">Gallery</a>
        <li><a href="#" onclick="loadPage('shop.html'); return false;" class="hover:text-teal-600 transition-colors duration-200">Shop</a></li>
        <li><a href="#" onclick="loadPage('about.html'); return false;" class="hover:text-teal-600 transition-colors duration-200">About</a></li>
        <li><a href="#" onclick="loadPage('contact.html'); return false;" class="hover:text-teal-600 transition-colors duration-200">Contact</a></li>
        <li><a href="#" onclick="loadPage('cart.html'); return false;" class="hover:text-teal-600 transition-colors duration-200">Cart</a></li>
      </ul>

      <!-- Mobile Menu Dropdown -->
      <div class="md:hidden relative">
        <button id="mobileMenuButton" onclick="toggleMobileDropdown()" class="bg-white text-gray-700 w-44 text-center px-4 py-2 rounded border border-gray-300 hover:bg-gray-50 shadow-sm select-none">
          Select Page
        </button>
        <ul id="mobileDropdown" class="absolute right-0 mt-2 w-44 bg-white border border-gray-300 rounded shadow-lg z-10 fade-toggle hidden">
          <li><a href="#" onclick="loadPage('gallery.html', 'Gallery'); toggleMobileDropdown(); return false;" class="block text-center px-4 py-2 hover:bg-[#e8f0ef] transition-colors">Gallery</a></li>
          <li><a href="#" onclick="loadPage('shop.html', 'Shop'); toggleMobileDropdown(); return false;" class="block text-center px-4 py-2 hover:bg-[#e8f0ef] transition-colors">Shop</a></li>
          <li><a href="#" onclick="loadPage('about.html', 'About'); toggleMobileDropdown(); return false;" class="block text-center px-4 py-2 hover:bg-[#e8f0ef] transition-colors">About</a></li>
          <li><a href="#" onclick="loadPage('contact.html', 'Contact'); toggleMobileDropdown(); return false;" class="block text-center px-4 py-2 hover:bg-[#e8f0ef] transition-colors">Contact</a></li>
          <li><a href="#" onclick="loadPage('cart.html', 'Cart'); toggleMobileDropdown(); return false;" class="block text-center px-4 py-2 hover:bg-[#e8f0ef] transition-colors">Cart</a></li>
        </ul>
      </div>
    </nav>
  </header>

  <!-- Dynamic Content Window -->
  <main id="content-window" class="container mx-auto px-4 py-8"></main>

  <!-- MODAL -->
  <div id="imageModal" class="fixed inset-0 z-50 hidden bg-black bg-opacity-80 p-4 flex items-center justify-center transition-opacity duration-300 ease-in-out opacity-0">
    <img 
      id="modalImage" 
      class="max-w-full max-h-[90vh] rounded-lg object-contain shadow-2xl transform scale-95 transition-all duration-300 ease-in-out opacity-0"
      alt="Enlarged Artwork"
    />
  </div>

  <!-- Footer -->
  <footer class="bg-gray-100 py-6 text-center text-sm text-gray-500">
    &copy; 2025 YourName. All rights reserved.
  </footer>

  <script>
    const pages = [
      { name: "Gallery", file: "gallery.html" },
      { name: "Shop", file: "shop.html" },
      { name: "About", file: "about.html" },
      { name: "Contact", file: "contact.html" },
      { name: "Cart", file: "cart.html" }
    ];

    function toggleMobileDropdown() {
      const menu = document.getElementById('mobileDropdown');
      if (menu.classList.contains('hidden')) {
        menu.classList.remove('hidden');
        requestAnimationFrame(() => menu.classList.add('visible'));
        document.addEventListener('click', outsideClickListener);
      } else {
        closeMobileDropdown();
      }
    }

    function closeMobileDropdown() {
      const menu = document.getElementById('mobileDropdown');
      menu.classList.remove('visible');
      setTimeout(() => menu.classList.add('hidden'), 300);
      document.removeEventListener('click', outsideClickListener);
    }

    function outsideClickListener(event) {
      const menu = document.getElementById('mobileDropdown');
      const button = document.getElementById('mobileMenuButton');
      if (!menu.contains(event.target) && !button.contains(event.target)) {
        closeMobileDropdown();
      }
    }

    // Enhanced Load Page + Modal Animation
    async function loadPage(page, label = null) {
      try {
        const res = await fetch(page);
        if (!res.ok) throw new Error('Page not found: ' + page);
        const html = await res.text();
        document.getElementById("content-window").innerHTML = html;
        if (label) document.getElementById("mobileMenuButton").innerText = label;

        // Modal Logic
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');

        document.querySelectorAll(".gallery-img").forEach(img => {
          img.addEventListener("click", () => {
            modalImg.src = img.getAttribute("data-full");
            modal.classList.remove("hidden");
            modalImg.classList.remove("scale-95", "opacity-0");
            void modalImg.offsetWidth;
            modalImg.classList.add("scale-100", "opacity-100");
            modal.classList.add("opacity-100");
          });
        });

        modal?.addEventListener("click", function (e) {
          if (e.target === modal) {
            modal.classList.remove("opacity-100");
            modalImg.classList.remove("scale-100", "opacity-100");
            modalImg.classList.add("scale-95", "opacity-0");
            setTimeout(() => {
              modal.classList.add("hidden");
              modalImg.src = "";
            }, 300);
          }
        });

      } catch (e) {
        document.getElementById("content-window").innerHTML = `<p class="text-center text-red-600">Error loading page: ${e.message}</p>`;
        console.error(e);
      }
    }

    window.onload = () => {
      loadPage('gallery.html', 'Gallery');
    };
  </script>
</body>
</html>
